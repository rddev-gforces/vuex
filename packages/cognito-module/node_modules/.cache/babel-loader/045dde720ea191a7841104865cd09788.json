{"remainingRequest":"/Users/martyn.race/Documents/vuex/packages/cognito-module/node_modules/thread-loader/dist/cjs.js!/Users/martyn.race/Documents/vuex/packages/cognito-module/node_modules/babel-loader/lib/index.js!/Users/martyn.race/Documents/vuex/packages/cognito-module/node_modules/eslint-loader/index.js??ref--13-0!/Users/martyn.race/Documents/vuex/packages/cognito-module/src/getters.js","dependencies":[{"path":"/Users/martyn.race/Documents/vuex/packages/cognito-module/src/getters.js","mtime":1572630468917},{"path":"/Users/martyn.race/Documents/vuex/packages/cognito-module/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/martyn.race/Documents/vuex/packages/cognito-module/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/martyn.race/Documents/vuex/packages/cognito-module/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/martyn.race/Documents/vuex/packages/cognito-module/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["module.exports = {\n  // TODO: ensure best method to verify this\n  isLoggedIn: (store = {}) => {\n    const session = store.session;\n    if (!session) return false;\n    const accessToken = session.accessToken;\n    if (!accessToken) return false;\n    const hasToken = accessToken.jwtToken;\n    const isActive = new Date(accessToken.payload.exp * 1000) > new Date();\n    const isMe = accessToken.payload.username === store.user.username;\n    return hasToken && isActive && isMe;\n  },\n  session: (store = {}) => 'session' in store && Object.keys(store.session).length !== 0 ? store.session : false,\n  userSub: (store = {}) => {\n    if (store.user && store.user.attributes) {\n      return store.user.attributes.sub;\n    } else if (store.user && store.user.userSub) {\n      return store.user.userSub;\n    } else {\n      return false;\n    }\n  },\n  username: (store = {}) => store.user && store.user.user ? store.user.user.username : false,\n  userAttributes: (store = {}) => store.user && store.user.attributes ? store.user.attributes : false,\n  userGroups: (store = {}) => store.session && store.session.accessToken && store.session.accessToken.payload && store.session.accessToken.payload['cognito:groups'] ? store.session.accessToken.payload['cognito:groups'] : false\n};",{"version":3,"sources":["/Users/martyn.race/Documents/vuex/packages/cognito-module/src/getters.js"],"names":["module","exports","isLoggedIn","store","session","accessToken","hasToken","jwtToken","isActive","Date","payload","exp","isMe","username","user","Object","keys","length","userSub","attributes","sub","userAttributes","userGroups"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB;AACf;AACAC,EAAAA,UAAU,EAAE,CAACC,KAAK,GAAG,EAAT,KAAgB;AAC1B,UAAMC,OAAO,GAAGD,KAAK,CAACC,OAAtB;AACA,QAAI,CAACA,OAAL,EAAc,OAAO,KAAP;AACd,UAAMC,WAAW,GAAGD,OAAO,CAACC,WAA5B;AACA,QAAI,CAACA,WAAL,EAAkB,OAAO,KAAP;AAClB,UAAMC,QAAQ,GAAGD,WAAW,CAACE,QAA7B;AACA,UAAMC,QAAQ,GAAG,IAAIC,IAAJ,CAASJ,WAAW,CAACK,OAAZ,CAAoBC,GAApB,GAA0B,IAAnC,IAA2C,IAAIF,IAAJ,EAA5D;AACA,UAAMG,IAAI,GAAGP,WAAW,CAACK,OAAZ,CAAoBG,QAApB,KAAiCV,KAAK,CAACW,IAAN,CAAWD,QAAzD;AACA,WAAOP,QAAQ,IAAIE,QAAZ,IAAwBI,IAA/B;AACD,GAXc;AAYfR,EAAAA,OAAO,EAAE,CAACD,KAAK,GAAG,EAAT,KAAgB,aAAaA,KAAb,IACvBY,MAAM,CAACC,IAAP,CAAYb,KAAK,CAACC,OAAlB,EAA2Ba,MAA3B,KAAsC,CADf,GAErBd,KAAK,CAACC,OAFe,GAGrB,KAfW;AAgBfc,EAAAA,OAAO,EAAE,CAACf,KAAK,GAAG,EAAT,KAAgB;AACvB,QAAIA,KAAK,CAACW,IAAN,IAAcX,KAAK,CAACW,IAAN,CAAWK,UAA7B,EAAyC;AACvC,aAAOhB,KAAK,CAACW,IAAN,CAAWK,UAAX,CAAsBC,GAA7B;AACD,KAFD,MAEO,IAAIjB,KAAK,CAACW,IAAN,IAAcX,KAAK,CAACW,IAAN,CAAWI,OAA7B,EAAsC;AAC3C,aAAOf,KAAK,CAACW,IAAN,CAAWI,OAAlB;AACD,KAFM,MAEA;AACL,aAAO,KAAP;AACD;AACF,GAxBc;AAyBfL,EAAAA,QAAQ,EAAE,CAACV,KAAK,GAAG,EAAT,KAAgBA,KAAK,CAACW,IAAN,IACxBX,KAAK,CAACW,IAAN,CAAWA,IADa,GAEtBX,KAAK,CAACW,IAAN,CAAWA,IAAX,CAAgBD,QAFM,GAGtB,KA5BW;AA6BfQ,EAAAA,cAAc,EAAE,CAAClB,KAAK,GAAG,EAAT,KAAgBA,KAAK,CAACW,IAAN,IAC9BX,KAAK,CAACW,IAAN,CAAWK,UADmB,GAE5BhB,KAAK,CAACW,IAAN,CAAWK,UAFiB,GAG5B,KAhCW;AAiCfG,EAAAA,UAAU,EAAE,CAACnB,KAAK,GAAG,EAAT,KAAgBA,KAAK,CAACC,OAAN,IAC1BD,KAAK,CAACC,OAAN,CAAcC,WADY,IAE1BF,KAAK,CAACC,OAAN,CAAcC,WAAd,CAA0BK,OAFA,IAG1BP,KAAK,CAACC,OAAN,CAAcC,WAAd,CAA0BK,OAA1B,CAAkC,gBAAlC,CAH0B,GAIxBP,KAAK,CAACC,OAAN,CAAcC,WAAd,CAA0BK,OAA1B,CAAkC,gBAAlC,CAJwB,GAKxB;AAtCW,CAAjB","sourcesContent":["module.exports = {\n  // TODO: ensure best method to verify this\n  isLoggedIn: (store = {}) => {\n    const session = store.session\n    if (!session) return false\n    const accessToken = session.accessToken\n    if (!accessToken) return false\n    const hasToken = accessToken.jwtToken\n    const isActive = new Date(accessToken.payload.exp * 1000) > new Date()\n    const isMe = accessToken.payload.username === store.user.username\n    return hasToken && isActive && isMe\n  },\n  session: (store = {}) => 'session' in store &&\n    Object.keys(store.session).length !== 0\n    ? store.session\n    : false,\n  userSub: (store = {}) => {\n    if (store.user && store.user.attributes) {\n      return store.user.attributes.sub\n    } else if (store.user && store.user.userSub) {\n      return store.user.userSub\n    } else {\n      return false\n    }\n  },\n  username: (store = {}) => store.user &&\n    store.user.user\n    ? store.user.user.username\n    : false,\n  userAttributes: (store = {}) => store.user &&\n    store.user.attributes\n    ? store.user.attributes\n    : false,\n  userGroups: (store = {}) => store.session &&\n    store.session.accessToken &&\n    store.session.accessToken.payload &&\n    store.session.accessToken.payload['cognito:groups']\n    ? store.session.accessToken.payload['cognito:groups']\n    : false\n}\n"]}]}